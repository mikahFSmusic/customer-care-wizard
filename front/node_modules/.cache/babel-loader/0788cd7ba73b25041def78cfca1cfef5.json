{"ast":null,"code":"// API Call to Kustomer for list of all customers\nconst kustomerAPIKey = process.env.REACT_APP_KUSTOMER_API_KEY;\nconst baseURL = \"https://api.kustomerapp.com/v1/customers/search\";\nconst proxyURL = \"https://cors-anywhere.herokuapp.com/\";\nexport const fetchCustomers = async name => {\n  let headers = new Headers({\n    \"Authorization\": `Bearer ${kustomerAPIKey}`,\n    \"Content-Type\": \"application/json\"\n  });\n  let raw = JSON.stringify({\n    and: [{\n      customer_name: {\n        contains: name\n      }\n    }],\n    sort: [{\n      customer_updated_at: \"asc\"\n    }],\n    queryContext: \"customer\",\n    or: []\n  });\n  let initObject = {\n    method: \"POST\",\n    headers: headers,\n    body: raw\n  };\n\n  try {\n    console.log(\"fetching customers\");\n    const response = await fetch(`${proxyURL}${baseURL}`, initObject);\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"sources":["/Users/mfs/Desktop/e m p l o y m e n t/Maisonette/Projects/damage-defect-wizard/front/src/KustomerAPI.ts"],"names":["kustomerAPIKey","process","env","REACT_APP_KUSTOMER_API_KEY","baseURL","proxyURL","fetchCustomers","name","headers","Headers","raw","JSON","stringify","and","customer_name","contains","sort","customer_updated_at","queryContext","or","initObject","method","body","console","log","response","fetch","data","json","error"],"mappings":"AAEA;AACA,MAAMA,cAAc,GAAGC,OAAO,CAACC,GAAR,CAAYC,0BAAnC;AACA,MAAMC,OAAe,GAAG,iDAAxB;AACA,MAAMC,QAAgB,GAAG,sCAAzB;AAEA,OAAO,MAAMC,cAAc,GAAG,MAAOC,IAAP,IAAwB;AACpD,MAAIC,OAAO,GAAG,IAAIC,OAAJ,CAAY;AACxB,qBAAkB,UAAST,cAAe,EADlB;AAExB,oBAAgB;AAFQ,GAAZ,CAAd;AAKA,MAAIU,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AACvBC,IAAAA,GAAG,EAAE,CAAC;AAAEC,MAAAA,aAAa,EAAE;AAAEC,QAAAA,QAAQ,EAAER;AAAZ;AAAjB,KAAD,CADkB;AAEvBS,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,mBAAmB,EAAE;AAAvB,KAAD,CAFiB;AAGvBC,IAAAA,YAAY,EAAE,UAHS;AAIvBC,IAAAA,EAAE,EAAE;AAJmB,GAAf,CAAV;AAOA,MAAIC,UAAU,GAAG;AACfC,IAAAA,MAAM,EAAE,MADO;AAEfb,IAAAA,OAAO,EAAEA,OAFM;AAGfc,IAAAA,IAAI,EAAEZ;AAHS,GAAjB;;AAMA,MAAI;AACFa,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAErB,QAAS,GAAED,OAAQ,EAAvB,EAA0BgB,UAA1B,CAA5B;AACA,UAAMO,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;AACA,WAAOD,IAAP;AACD,GALD,CAKE,OAAOE,KAAP,EAAc;AACdN,IAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACD;AACF,CA3BM","sourcesContent":["\n\n// API Call to Kustomer for list of all customers\nconst kustomerAPIKey = process.env.REACT_APP_KUSTOMER_API_KEY;\nconst baseURL: string = \"https://api.kustomerapp.com/v1/customers/search\";\nconst proxyURL: string = \"https://cors-anywhere.herokuapp.com/\";\n\nexport const fetchCustomers = async (name: string) => {\n  let headers = new Headers({\n    \"Authorization\": `Bearer ${kustomerAPIKey}`,\n    \"Content-Type\": \"application/json\",\n  });\n\n  let raw = JSON.stringify({\n    and: [{ customer_name: { contains: name } }],\n    sort: [{ customer_updated_at: \"asc\" }],\n    queryContext: \"customer\",\n    or: [],\n  });\n\n  let initObject = {\n    method: \"POST\",\n    headers: headers,\n    body: raw,\n  };\n\n  try {\n    console.log(\"fetching customers\")\n    const response = await fetch(`${proxyURL}${baseURL}`, initObject);\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}