{"ast":null,"code":"import * as React from 'react';\nimport { createContext, useState as useState$1, useMemo, createElement, useContext } from 'react';\nimport ReactJson from 'react-json-view';\nimport { Animate } from 'react-simple-animate';\nconst STORE_DEFAULT_NAME = '__STATE_MACHINE__';\nconst STATE_MACHINE_DEBUG_NAME = '___STATE_MACHINE_DEBUG__';\nconst STATE_MACHINE_DEV_TOOL_CONFIG = '___STATE_MACHINE_DEV_CONFIG__';\nconst COLORS = {\n  primary: '#0a1c2c',\n  secondary: 'rgb(17, 50, 76)'\n};\nconst Z_INDEX = {\n  top: 100000000,\n  second: 99999999\n};\n\nfunction storeFactory(storageType) {\n  let storeName = STORE_DEFAULT_NAME;\n  let store = {};\n  const sessionStorageData = storageType.getItem(storeName);\n\n  try {\n    store = sessionStorageData ? JSON.parse(sessionStorageData) : {};\n  } catch (_a) {}\n\n  const getName = () => storeName;\n\n  const setName = name => {\n    const data = storageType.getItem(name);\n    storeName = name;\n\n    try {\n      store = data ? JSON.parse(data) : {};\n    } catch (_a) {}\n  };\n\n  const set = value => {\n    store = value;\n  };\n\n  const get = () => store;\n\n  return {\n    set,\n    get,\n    getName,\n    setName\n  };\n}\n\nfunction setUpDevTools(isDevMode, storageType, getName, getStore) {\n  if (typeof window === 'undefined' || !isDevMode) return; // @ts-ignore\n\n  window['STATE_MACHINE_DEBUG'] = value => storageType.setItem(STATE_MACHINE_DEBUG_NAME, value); // @ts-ignore\n\n\n  window['STATE_MACHINE_RESET'] = () => storageType.clear(); // @ts-ignore\n\n\n  window['STATE_MACHINE_GET_STORE'] = () => storageType.getItem(getName()); // @ts-ignore\n\n\n  window['STATE_MACHINE_SAVE_TO'] = name => window.localStorage.setItem(name, JSON.stringify(getStore())); // @ts-ignore\n\n\n  window['STATE_MACHINE_LOAD'] = ({\n    storeName,\n    data\n  }) => storageType.setItem(getName() || STATE_MACHINE_DEBUG_NAME, data || window.localStorage.getItem(storeName) || '');\n}\n\nvar StateMachineContext = createContext({\n  store: {},\n  updateStore: payload => payload\n});\n\nconst transform = require('lodash.transform');\n\nconst isEqual = require('lodash.isequal');\n\nconst isObject = require('lodash.isobject');\n\nfunction difference(object, base) {\n  function changes(object, base) {\n    return transform(object, (result, value, key) => {\n      if (!isEqual(value, base[key])) {\n        result[key] = isObject(value) && isObject(base[key]) ? changes(value, base[key]) : value;\n      }\n    });\n  }\n\n  return changes(object, base);\n}\n\nconst cloneDeep = require('lodash.clonedeep');\n\nfunction logStartAction({\n  debugName,\n  getStore,\n  middleWare\n}) {\n  const storeCopy = cloneDeep(getStore());\n  console.log('┌───────────────────────────────────────>');\n  console.log(`├─%c${debugName}`, 'color: #bada55');\n  console.log('├─before:', storeCopy);\n  middleWare({\n    debugName\n  });\n  return storeCopy;\n}\n\nfunction logEndAction({\n  getStore,\n  storeCopy\n}) {\n  const isEmpty = require('lodash.isempty');\n\n  const diff = difference(getStore(), storeCopy);\n  const noChange = isEmpty(diff);\n  console.log(noChange ? '└─after' : '├─after:', getStore());\n\n  if (!noChange) {\n    console.log('└─diff:', difference(storeCopy, getStore()), ' → ', difference(getStore(), storeCopy));\n  }\n}\n\nlet action;\nlet storageType = typeof window === 'undefined' ? {\n  getItem: payload => payload,\n  setItem: payload => payload,\n  clear: () => {},\n  length: 0,\n  key: payload => payload.toString(),\n  removeItem: () => {}\n} : window.sessionStorage;\nlet getStore;\nlet setStore;\nlet getName;\nlet setStorageName;\nconst isDevMode = process.env.NODE_ENV !== 'production';\n\nconst middleWare = data => {\n  if (data) action = data;\n  return action;\n};\n\nfunction setStorageType(type) {\n  storageType = type;\n}\n\nfunction createStore(data) {\n  const methods = storeFactory(storageType);\n  setStorageName = methods.setName;\n  getName = methods.getName;\n  getStore = methods.get;\n  setStore = methods.set;\n  const result = getStore();\n  setUpDevTools(isDevMode, storageType, getName, getStore);\n  if (result && Object.keys(result).length) return;\n  setStore(data);\n}\n\nfunction StateMachineProvider(props) {\n  const [globalState, updateStore] = useState$1(getStore());\n  const value = useMemo(() => ({\n    store: globalState,\n    updateStore\n  }), [globalState]); // @ts-ignore\n\n  return createElement(StateMachineContext.Provider, Object.assign({\n    value: value\n  }, props));\n}\n\nconst actionTemplate = ({\n  options,\n  callback,\n  key,\n  updateStore\n}) => payload => {\n  let isDebugOn;\n  let storeCopy;\n  const debugName = options && (options.debugName || options.debugNames) ? key && options.debugNames ? options.debugNames[key] : options.debugName : '';\n\n  if (isDevMode) {\n    isDebugOn = storageType.getItem(STATE_MACHINE_DEBUG_NAME) === 'true';\n\n    if (isDebugOn) {\n      storeCopy = logStartAction({\n        debugName: debugName || '',\n        getStore,\n        middleWare\n      });\n    }\n  }\n\n  setStore(callback && callback(getStore(), payload));\n  storageType.setItem(getName(), JSON.stringify(getStore()));\n\n  if (options && options.shouldReRenderApp !== false) {\n    updateStore(getStore());\n  }\n\n  if (isDevMode && isDebugOn) {\n    logEndAction({\n      getStore,\n      storeCopy\n    });\n  }\n};\n\nfunction useStateMachine(updateStoreFunction, options) {\n  const {\n    store: globalState,\n    updateStore\n  } = useContext(StateMachineContext);\n\n  if (updateStoreFunction && Object.keys(updateStoreFunction).length) {\n    return {\n      actions: updateStoreFunction ? Object.entries(updateStoreFunction).reduce((previous, [key, callback]) => Object.assign({}, previous, {\n        [key]: actionTemplate({\n          options,\n          callback,\n          updateStore,\n          key\n        })\n      }), {}) : {},\n      action: () => {},\n      state: globalState\n    };\n  }\n\n  return {\n    actions: {},\n    action: updateStoreFunction ? actionTemplate({\n      options,\n      callback: updateStoreFunction,\n      updateStore\n    }) : () => {},\n    state: globalState\n  };\n}\n\nconst DevToolActionPanel = ({\n  setStateIndex,\n  stateIndex,\n  actions\n}) => {\n  const [filterName, setFilterName] = useState$1('');\n  return createElement(\"div\", {\n    style: {\n      borderRight: '1px solid #11324c'\n    }\n  }, createElement(\"p\", {\n    style: {\n      color: 'white',\n      fontSize: 13,\n      lineHeight: '20px',\n      margin: 0,\n      padding: '10px 10px 9px',\n      borderBottom: `1px solid ${COLORS.secondary}`\n    }\n  }, createElement(\"span\", {\n    style: {\n      fontSize: 10\n    }\n  }, \"\\u25BC\"), \" Actions\"), createElement(\"input\", {\n    name: \"filter\",\n    style: {\n      borderRadius: 0,\n      background: '#11334c',\n      marginTop: 10,\n      border: 'none',\n      color: 'white',\n      padding: '5px 10px',\n      width: '100%',\n      boxSizing: 'border-box',\n      fontSize: '14px'\n    },\n    onChange: event => // @ts-ignore\n    setFilterName(event.target.value.toLowerCase()),\n    placeholder: \"Filter...\"\n  }), createElement(\"ul\", {\n    style: {\n      listStyle: 'none',\n      padding: 0,\n      margin: 0,\n      height: 'calc(100vh - 50px)',\n      overflowY: 'auto'\n    }\n  }, actions.filter(data => data.name && data.name.toLowerCase && data.name.toLowerCase().includes(filterName) || !data.name && !filterName).map(({\n    name\n  }, index) => createElement(\"li\", {\n    style: {\n      fontSize: 13,\n      padding: 0\n    },\n    key: `${name}${index}`\n  }, createElement(\"button\", {\n    style: {\n      margin: 0,\n      padding: 10,\n      background: 'none',\n      color: 'white',\n      border: 'none',\n      display: 'block',\n      width: '100%',\n      textAlign: 'left',\n      borderRadius: 0,\n      borderBottom: stateIndex === index ? '1px solid #ec5990' : `1px solid ${COLORS.secondary}`,\n      textTransform: 'initial'\n    },\n    onClick: () => {\n      setStateIndex(index);\n    }\n  }, name || 'unknown')))));\n};\n\nfunction DevToolStorage({\n  setLoadPanel\n}) {\n  return createElement(\"div\", {\n    style: {\n      color: 'white',\n      position: 'absolute',\n      top: 40,\n      right: 0,\n      width: 450,\n      margin: 0,\n      padding: 10,\n      background: COLORS.primary,\n      fontSize: 12,\n      boxSizing: 'border-box',\n      zIndex: Z_INDEX.second,\n      overflowY: 'auto',\n      height: 'calc(100vh - 50px)',\n      overflowX: 'hidden'\n    }\n  }, createElement(\"ul\", {\n    style: {\n      padding: 0,\n      margin: 0,\n      listStyle: 'none',\n      fontSize: 14,\n      lineHeight: 1.5\n    }\n  }, Object.entries(window.localStorage).map(([key, value], index) => createElement(\"li\", {\n    key: `${key}${index}`\n  }, createElement(\"button\", {\n    style: {\n      padding: 10,\n      margin: '0 0 20px',\n      width: '100%',\n      textAlign: 'left',\n      background: 'none',\n      color: 'white',\n      border: `1px solid ${COLORS.secondary}`,\n      overflowWrap: 'break-word'\n    },\n    onClick: () => {\n      if (window.confirm('Are you sure to load state?')) {\n        window.sessionStorage.setItem(STORE_DEFAULT_NAME, value);\n      }\n    }\n  }, key)))), createElement(\"button\", {\n    style: {\n      margin: 0,\n      borderRadius: '4px',\n      padding: '10px',\n      width: '100%'\n    },\n    onClick: () => setLoadPanel(false)\n  }, \"Go Back\"));\n}\n\nfunction saveSetting(setting) {\n  try {\n    const config = window.localStorage.getItem(STATE_MACHINE_DEV_TOOL_CONFIG);\n    window.localStorage.setItem(STATE_MACHINE_DEV_TOOL_CONFIG, config ? JSON.stringify(Object.assign({}, JSON.parse(config), setting)) : JSON.stringify(setting));\n  } catch (_a) {}\n}\n\nconst buttonStyle = {\n  margin: '0 10px 0 0',\n  padding: '5px 20px',\n  display: 'inline',\n  fontSize: '12px',\n  border: 'none',\n  borderRadius: '2px'\n};\n\nvar DevToolStateTree = ({\n  isLoadPanelShow,\n  setLoadPanel,\n  state,\n  setExpand,\n  isCollapse,\n  closePanel,\n  stateIndex,\n  actions\n}) => {\n  const collapse = () => {\n    const expandValue = !isCollapse;\n    setExpand(expandValue);\n    saveSetting({\n      isCollapse: expandValue\n    });\n  };\n\n  return createElement(\"section\", null, isLoadPanelShow && createElement(DevToolStorage, {\n    setLoadPanel: setLoadPanel\n  }), createElement(\"h3\", {\n    style: {\n      fontWeight: 'lighter',\n      color: 'white',\n      fontSize: 12,\n      padding: 10,\n      lineHeight: '20px',\n      margin: '0 0 10px 0',\n      borderBottom: `1px solid ${COLORS.secondary}`\n    }\n  }, \"\\u2646 Little State Machine\"), createElement(\"section\", {\n    style: {\n      marginLeft: 10\n    }\n  }, createElement(\"button\", {\n    onClick: () => {\n      const name = prompt('💁🏻‍♀️ Give it a name.');\n\n      if (name) {\n        window.localStorage.setItem(name, JSON.stringify(state));\n      }\n    },\n    style: buttonStyle\n  }, \"Save\"), createElement(\"button\", {\n    style: buttonStyle,\n    onClick: () => setLoadPanel(!isLoadPanelShow)\n  }, \"Load\"), createElement(\"button\", {\n    style: buttonStyle,\n    onClick: () => {\n      collapse();\n    }\n  }, isCollapse ? 'Expand' : 'collapse')), createElement(\"button\", {\n    style: {\n      color: 'white',\n      position: 'absolute',\n      top: -5,\n      right: 0,\n      padding: 10,\n      appearance: 'none',\n      background: 'none',\n      fontSize: 26,\n      border: 0,\n      margin: 0,\n      lineHeight: '22px'\n    },\n    \"aria-label\": \"close panel\",\n    onClick: () => {\n      if (isLoadPanelShow) {\n        setLoadPanel(false);\n      } else {\n        closePanel();\n      }\n    }\n  }, \"\\u00D7\"), createElement(\"section\", {\n    style: {\n      padding: '10px 0px 10px 10px'\n    }\n  }, createElement(ReactJson, {\n    src: (stateIndex === -1 ? actions[actions.length - 1] : actions[stateIndex]).state,\n    theme: \"harmonic\",\n    iconStyle: \"square\",\n    enableClipboard: false,\n    collapsed: isCollapse,\n    displayObjectSize: false,\n    displayDataTypes: false,\n    indentWidth: 2,\n    style: {\n      fontSize: 12,\n      overflow: 'auto',\n      height: 'calc(100vh - 90px)'\n    }\n  })));\n};\n\nconst cloneDeep$1 = require('lodash.clonedeep');\n\nconst {\n  useState\n} = React;\nlet actions = [];\nlet previousStateIndex = -1;\nlet previousIsLoadPanelShow = false;\nconst config = typeof window !== 'undefined' ? // @ts-ignore\nJSON.parse(window.localStorage.getItem(STATE_MACHINE_DEV_TOOL_CONFIG) || '{}') : {\n  isCollapse: false,\n  isClose: false\n};\nlet previousIsCollapse = config.isCollapse;\nlet previousIsClose = config.isClose;\n\nconst DevTool = () => {\n  const {\n    state\n  } = useStateMachine();\n  const [isClose, setClose] = useState(config.isClose);\n  const [isLoadPanelShow, setLoadPanel] = useState(false);\n  const [isCollapse, setExpand] = useState(config.isCollapse);\n  const [stateIndex, setStateIndex] = useState(-1);\n\n  const closePanel = () => {\n    const closeValue = !isClose;\n    setClose(closeValue);\n    saveSetting({\n      isClose: closeValue\n    });\n  };\n\n  if (previousStateIndex === stateIndex && previousIsClose === isClose && previousIsLoadPanelShow === isLoadPanelShow && previousIsCollapse === isCollapse) {\n    actions.push({\n      name: (middleWare() || {}).debugName,\n      state: cloneDeep$1(state)\n    });\n  }\n\n  previousStateIndex = stateIndex;\n  previousIsClose = isClose;\n  previousIsLoadPanelShow = isLoadPanelShow;\n  previousIsCollapse = isCollapse;\n  return createElement(\"div\", {\n    style: {\n      fontFamily: `BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif`\n    }\n  }, createElement(Animate, {\n    play: !isClose,\n    end: {\n      transform: 'translateY(-50px)'\n    },\n    delay: 0.5,\n    render: ({\n      style\n    }) => createElement(\"button\", {\n      style: Object.assign({\n        position: 'fixed',\n        right: 0,\n        top: -1,\n        width: 200,\n        margin: 0,\n        padding: 10,\n        background: COLORS.primary,\n        color: 'white',\n        zIndex: Z_INDEX.top,\n        fontSize: 13,\n        lineHeight: '20px',\n        border: 0,\n        borderRadius: 0\n      }, style),\n      onClick: () => closePanel()\n    }, \"\\u2646 LITTLE STATE MACHINE\")\n  }), createElement(Animate, {\n    play: isClose,\n    end: {\n      transform: 'translateX(800px)'\n    },\n    easeType: \"ease-out\",\n    duration: 0.5,\n    render: ({\n      style\n    }) => createElement(\"div\", {\n      style: Object.assign({\n        zIndex: Z_INDEX.top,\n        position: 'fixed',\n        right: 0,\n        top: 0,\n        width: 600,\n        height: '100vh',\n        background: COLORS.primary,\n        display: 'grid',\n        gridTemplateColumns: '150px auto',\n        boxShadow: '0 0 8px 3px #080808'\n      }, style)\n    }, createElement(DevToolActionPanel, {\n      stateIndex: stateIndex,\n      actions: actions,\n      setStateIndex: setStateIndex\n    }), createElement(DevToolStateTree, Object.assign({}, {\n      closePanel,\n      actions,\n      isLoadPanelShow,\n      setLoadPanel,\n      state,\n      setExpand,\n      isCollapse,\n      setClose,\n      isClose,\n      stateIndex\n    })))\n  }));\n};\n\nexport { DevTool, StateMachineContext, StateMachineProvider, createStore, setStorageName, setStorageType, useStateMachine };","map":{"version":3,"sources":["/Users/mfs/Desktop/e m p l o y m e n t/Maisonette/Projects/damage-defect-wizard/node_modules/little-state-machine/dist/index.es.js"],"names":["React","createContext","useState","useState$1","useMemo","createElement","useContext","ReactJson","Animate","STORE_DEFAULT_NAME","STATE_MACHINE_DEBUG_NAME","STATE_MACHINE_DEV_TOOL_CONFIG","COLORS","primary","secondary","Z_INDEX","top","second","storeFactory","storageType","storeName","store","sessionStorageData","getItem","JSON","parse","_a","getName","setName","name","data","set","value","get","setUpDevTools","isDevMode","getStore","window","setItem","clear","localStorage","stringify","StateMachineContext","updateStore","payload","transform","require","isEqual","isObject","difference","object","base","changes","result","key","cloneDeep","logStartAction","debugName","middleWare","storeCopy","console","log","logEndAction","isEmpty","diff","noChange","action","length","toString","removeItem","sessionStorage","setStore","setStorageName","process","env","NODE_ENV","setStorageType","type","createStore","methods","Object","keys","StateMachineProvider","props","globalState","Provider","assign","actionTemplate","options","callback","isDebugOn","debugNames","shouldReRenderApp","useStateMachine","updateStoreFunction","actions","entries","reduce","previous","state","DevToolActionPanel","setStateIndex","stateIndex","filterName","setFilterName","style","borderRight","color","fontSize","lineHeight","margin","padding","borderBottom","borderRadius","background","marginTop","border","width","boxSizing","onChange","event","target","toLowerCase","placeholder","listStyle","height","overflowY","filter","includes","map","index","display","textAlign","textTransform","onClick","DevToolStorage","setLoadPanel","position","right","zIndex","overflowX","overflowWrap","confirm","saveSetting","setting","config","buttonStyle","DevToolStateTree","isLoadPanelShow","setExpand","isCollapse","closePanel","collapse","expandValue","fontWeight","marginLeft","prompt","appearance","src","theme","iconStyle","enableClipboard","collapsed","displayObjectSize","displayDataTypes","indentWidth","overflow","cloneDeep$1","previousStateIndex","previousIsLoadPanelShow","isClose","previousIsCollapse","previousIsClose","DevTool","setClose","closeValue","push","fontFamily","play","end","delay","render","easeType","duration","gridTemplateColumns","boxShadow"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { createContext, useState as useState$1, useMemo, createElement, useContext } from 'react';\nimport ReactJson from 'react-json-view';\nimport { Animate } from 'react-simple-animate';\n\nconst STORE_DEFAULT_NAME = '__STATE_MACHINE__';\r\nconst STATE_MACHINE_DEBUG_NAME = '___STATE_MACHINE_DEBUG__';\r\nconst STATE_MACHINE_DEV_TOOL_CONFIG = '___STATE_MACHINE_DEV_CONFIG__';\r\nconst COLORS = {\r\n    primary: '#0a1c2c',\r\n    secondary: 'rgb(17, 50, 76)',\r\n};\r\nconst Z_INDEX = {\r\n    top: 100000000,\r\n    second: 99999999,\r\n};\n\nfunction storeFactory(storageType) {\r\n    let storeName = STORE_DEFAULT_NAME;\r\n    let store = {};\r\n    const sessionStorageData = storageType.getItem(storeName);\r\n    try {\r\n        store = sessionStorageData ? JSON.parse(sessionStorageData) : {};\r\n    }\r\n    catch (_a) { }\r\n    const getName = () => storeName;\r\n    const setName = (name) => {\r\n        const data = storageType.getItem(name);\r\n        storeName = name;\r\n        try {\r\n            store = data ? JSON.parse(data) : {};\r\n        }\r\n        catch (_a) { }\r\n    };\r\n    const set = (value) => {\r\n        store = value;\r\n    };\r\n    const get = () => store;\r\n    return {\r\n        set,\r\n        get,\r\n        getName,\r\n        setName,\r\n    };\r\n}\n\nfunction setUpDevTools(isDevMode, storageType, getName, getStore) {\r\n    if (typeof window === 'undefined' || !isDevMode)\r\n        return;\r\n    // @ts-ignore\r\n    window['STATE_MACHINE_DEBUG'] = (value) => storageType.setItem(STATE_MACHINE_DEBUG_NAME, value);\r\n    // @ts-ignore\r\n    window['STATE_MACHINE_RESET'] = () => storageType.clear();\r\n    // @ts-ignore\r\n    window['STATE_MACHINE_GET_STORE'] = () => storageType.getItem(getName());\r\n    // @ts-ignore\r\n    window['STATE_MACHINE_SAVE_TO'] = name => window.localStorage.setItem(name, JSON.stringify(getStore()));\r\n    // @ts-ignore\r\n    window['STATE_MACHINE_LOAD'] = ({ storeName, data, }) => storageType.setItem(getName() || STATE_MACHINE_DEBUG_NAME, data || window.localStorage.getItem(storeName) || '');\r\n}\n\nvar StateMachineContext = createContext({\r\n    store: {},\r\n    updateStore: (payload) => payload,\r\n});\n\nconst transform = require('lodash.transform');\r\nconst isEqual = require('lodash.isequal');\r\nconst isObject = require('lodash.isobject');\r\nfunction difference(object, base) {\r\n    function changes(object, base) {\r\n        return transform(object, (result, value, key) => {\r\n            if (!isEqual(value, base[key])) {\r\n                result[key] =\r\n                    isObject(value) && isObject(base[key])\r\n                        ? changes(value, base[key])\r\n                        : value;\r\n            }\r\n        });\r\n    }\r\n    return changes(object, base);\r\n}\n\nconst cloneDeep = require('lodash.clonedeep');\r\nfunction logStartAction({ debugName, getStore, middleWare, }) {\r\n    const storeCopy = cloneDeep(getStore());\r\n    console.log('┌───────────────────────────────────────>');\r\n    console.log(`├─%c${debugName}`, 'color: #bada55');\r\n    console.log('├─before:', storeCopy);\r\n    middleWare({ debugName });\r\n    return storeCopy;\r\n}\r\nfunction logEndAction({ getStore, storeCopy, }) {\r\n    const isEmpty = require('lodash.isempty');\r\n    const diff = difference(getStore(), storeCopy);\r\n    const noChange = isEmpty(diff);\r\n    console.log(noChange ? '└─after' : '├─after:', getStore());\r\n    if (!noChange) {\r\n        console.log('└─diff:', difference(storeCopy, getStore()), ' → ', difference(getStore(), storeCopy));\r\n    }\r\n}\n\nlet action;\r\nlet storageType = typeof window === 'undefined'\r\n    ? {\r\n        getItem: payload => payload,\r\n        setItem: (payload) => payload,\r\n        clear: () => { },\r\n        length: 0,\r\n        key: (payload) => payload.toString(),\r\n        removeItem: () => { },\r\n    }\r\n    : window.sessionStorage;\r\nlet getStore;\r\nlet setStore;\r\nlet getName;\r\nlet setStorageName;\r\nconst isDevMode = process.env.NODE_ENV !== 'production';\r\nconst middleWare = (data) => {\r\n    if (data)\r\n        action = data;\r\n    return action;\r\n};\r\nfunction setStorageType(type) {\r\n    storageType = type;\r\n}\r\nfunction createStore(data) {\r\n    const methods = storeFactory(storageType);\r\n    setStorageName = methods.setName;\r\n    getName = methods.getName;\r\n    getStore = methods.get;\r\n    setStore = methods.set;\r\n    const result = getStore();\r\n    setUpDevTools(isDevMode, storageType, getName, getStore);\r\n    if (result && Object.keys(result).length)\r\n        return;\r\n    setStore(data);\r\n}\r\nfunction StateMachineProvider(props) {\r\n    const [globalState, updateStore] = useState$1(getStore());\r\n    const value = useMemo(() => ({\r\n        store: globalState,\r\n        updateStore,\r\n    }), [globalState]);\r\n    // @ts-ignore\r\n    return createElement(StateMachineContext.Provider, Object.assign({ value: value }, props));\r\n}\r\nconst actionTemplate = ({ options, callback, key, updateStore, }) => (payload) => {\r\n    let isDebugOn;\r\n    let storeCopy;\r\n    const debugName = options && (options.debugName || options.debugNames)\r\n        ? key && options.debugNames\r\n            ? options.debugNames[key]\r\n            : options.debugName\r\n        : '';\r\n    if (isDevMode) {\r\n        isDebugOn = storageType.getItem(STATE_MACHINE_DEBUG_NAME) === 'true';\r\n        if (isDebugOn) {\r\n            storeCopy = logStartAction({ debugName: debugName || '', getStore, middleWare });\r\n        }\r\n    }\r\n    setStore(callback && callback(getStore(), payload));\r\n    storageType.setItem(getName(), JSON.stringify(getStore()));\r\n    if (options && options.shouldReRenderApp !== false) {\r\n        updateStore(getStore());\r\n    }\r\n    if (isDevMode && isDebugOn) {\r\n        logEndAction({\r\n            getStore,\r\n            storeCopy,\r\n        });\r\n    }\r\n};\r\nfunction useStateMachine(updateStoreFunction, options) {\r\n    const { store: globalState, updateStore } = useContext(StateMachineContext);\r\n    if (updateStoreFunction && Object.keys(updateStoreFunction).length) {\r\n        return {\r\n            actions: updateStoreFunction\r\n                ? Object.entries(updateStoreFunction).reduce((previous, [key, callback]) => (Object.assign({}, previous, { [key]: actionTemplate({\r\n                        options,\r\n                        callback,\r\n                        updateStore,\r\n                        key,\r\n                    }) })), {})\r\n                : {},\r\n            action: () => { },\r\n            state: globalState,\r\n        };\r\n    }\r\n    return {\r\n        actions: {},\r\n        action: updateStoreFunction\r\n            ? actionTemplate({\r\n                options,\r\n                callback: updateStoreFunction,\r\n                updateStore,\r\n            })\r\n            : () => { },\r\n        state: globalState,\r\n    };\r\n}\n\nconst DevToolActionPanel = ({ setStateIndex, stateIndex, actions, }) => {\r\n    const [filterName, setFilterName] = useState$1('');\r\n    return (createElement(\"div\", { style: {\r\n            borderRight: '1px solid #11324c',\r\n        } },\r\n        createElement(\"p\", { style: {\r\n                color: 'white',\r\n                fontSize: 13,\r\n                lineHeight: '20px',\r\n                margin: 0,\r\n                padding: '10px 10px 9px',\r\n                borderBottom: `1px solid ${COLORS.secondary}`,\r\n            } },\r\n            createElement(\"span\", { style: { fontSize: 10 } }, \"\\u25BC\"),\r\n            \" Actions\"),\r\n        createElement(\"input\", { name: \"filter\", style: {\r\n                borderRadius: 0,\r\n                background: '#11334c',\r\n                marginTop: 10,\r\n                border: 'none',\r\n                color: 'white',\r\n                padding: '5px 10px',\r\n                width: '100%',\r\n                boxSizing: 'border-box',\r\n                fontSize: '14px',\r\n            }, onChange: (event) => \r\n            // @ts-ignore\r\n            setFilterName(event.target.value.toLowerCase()), placeholder: \"Filter...\" }),\r\n        createElement(\"ul\", { style: {\r\n                listStyle: 'none',\r\n                padding: 0,\r\n                margin: 0,\r\n                height: 'calc(100vh - 50px)',\r\n                overflowY: 'auto',\r\n            } }, actions\r\n            .filter(data => (data.name &&\r\n            data.name.toLowerCase &&\r\n            data.name.toLowerCase().includes(filterName)) ||\r\n            (!data.name && !filterName))\r\n            .map(({ name }, index) => (createElement(\"li\", { style: {\r\n                fontSize: 13,\r\n                padding: 0,\r\n            }, key: `${name}${index}` },\r\n            createElement(\"button\", { style: {\r\n                    margin: 0,\r\n                    padding: 10,\r\n                    background: 'none',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    display: 'block',\r\n                    width: '100%',\r\n                    textAlign: 'left',\r\n                    borderRadius: 0,\r\n                    borderBottom: stateIndex === index\r\n                        ? '1px solid #ec5990'\r\n                        : `1px solid ${COLORS.secondary}`,\r\n                    textTransform: 'initial',\r\n                }, onClick: () => {\r\n                    setStateIndex(index);\r\n                } }, name || 'unknown')))))));\r\n};\n\nfunction DevToolStorage({ setLoadPanel }) {\r\n    return (createElement(\"div\", { style: {\r\n            color: 'white',\r\n            position: 'absolute',\r\n            top: 40,\r\n            right: 0,\r\n            width: 450,\r\n            margin: 0,\r\n            padding: 10,\r\n            background: COLORS.primary,\r\n            fontSize: 12,\r\n            boxSizing: 'border-box',\r\n            zIndex: Z_INDEX.second,\r\n            overflowY: 'auto',\r\n            height: 'calc(100vh - 50px)',\r\n            overflowX: 'hidden',\r\n        } },\r\n        createElement(\"ul\", { style: {\r\n                padding: 0,\r\n                margin: 0,\r\n                listStyle: 'none',\r\n                fontSize: 14,\r\n                lineHeight: 1.5,\r\n            } }, Object.entries(window.localStorage).map(([key, value], index) => (createElement(\"li\", { key: `${key}${index}` },\r\n            createElement(\"button\", { style: {\r\n                    padding: 10,\r\n                    margin: '0 0 20px',\r\n                    width: '100%',\r\n                    textAlign: 'left',\r\n                    background: 'none',\r\n                    color: 'white',\r\n                    border: `1px solid ${COLORS.secondary}`,\r\n                    overflowWrap: 'break-word',\r\n                }, onClick: () => {\r\n                    if (window.confirm('Are you sure to load state?')) {\r\n                        window.sessionStorage.setItem(STORE_DEFAULT_NAME, value);\r\n                    }\r\n                } }, key))))),\r\n        createElement(\"button\", { style: {\r\n                margin: 0,\r\n                borderRadius: '4px',\r\n                padding: '10px',\r\n                width: '100%',\r\n            }, onClick: () => setLoadPanel(false) }, \"Go Back\")));\r\n}\n\nfunction saveSetting(setting) {\r\n    try {\r\n        const config = window.localStorage.getItem(STATE_MACHINE_DEV_TOOL_CONFIG);\r\n        window.localStorage.setItem(STATE_MACHINE_DEV_TOOL_CONFIG, config\r\n            ? JSON.stringify(Object.assign({}, JSON.parse(config), setting))\r\n            : JSON.stringify(setting));\r\n    }\r\n    catch (_a) { }\r\n}\n\nconst buttonStyle = {\r\n    margin: '0 10px 0 0',\r\n    padding: '5px 20px',\r\n    display: 'inline',\r\n    fontSize: '12px',\r\n    border: 'none',\r\n    borderRadius: '2px',\r\n};\r\nvar DevToolStateTree = ({ isLoadPanelShow, setLoadPanel, state, setExpand, isCollapse, closePanel, stateIndex, actions, }) => {\r\n    const collapse = () => {\r\n        const expandValue = !isCollapse;\r\n        setExpand(expandValue);\r\n        saveSetting({ isCollapse: expandValue });\r\n    };\r\n    return (createElement(\"section\", null,\r\n        isLoadPanelShow && createElement(DevToolStorage, { setLoadPanel: setLoadPanel }),\r\n        createElement(\"h3\", { style: {\r\n                fontWeight: 'lighter',\r\n                color: 'white',\r\n                fontSize: 12,\r\n                padding: 10,\r\n                lineHeight: '20px',\r\n                margin: '0 0 10px 0',\r\n                borderBottom: `1px solid ${COLORS.secondary}`,\r\n            } }, \"\\u2646 Little State Machine\"),\r\n        createElement(\"section\", { style: {\r\n                marginLeft: 10,\r\n            } },\r\n            createElement(\"button\", { onClick: () => {\r\n                    const name = prompt('💁🏻‍♀️ Give it a name.');\r\n                    if (name) {\r\n                        window.localStorage.setItem(name, JSON.stringify(state));\r\n                    }\r\n                }, style: buttonStyle }, \"Save\"),\r\n            createElement(\"button\", { style: buttonStyle, onClick: () => setLoadPanel(!isLoadPanelShow) }, \"Load\"),\r\n            createElement(\"button\", { style: buttonStyle, onClick: () => {\r\n                    collapse();\r\n                } }, isCollapse ? 'Expand' : 'collapse')),\r\n        createElement(\"button\", { style: {\r\n                color: 'white',\r\n                position: 'absolute',\r\n                top: -5,\r\n                right: 0,\r\n                padding: 10,\r\n                appearance: 'none',\r\n                background: 'none',\r\n                fontSize: 26,\r\n                border: 0,\r\n                margin: 0,\r\n                lineHeight: '22px',\r\n            }, \"aria-label\": \"close panel\", onClick: () => {\r\n                if (isLoadPanelShow) {\r\n                    setLoadPanel(false);\r\n                }\r\n                else {\r\n                    closePanel();\r\n                }\r\n            } }, \"\\u00D7\"),\r\n        createElement(\"section\", { style: { padding: '10px 0px 10px 10px' } },\r\n            createElement(ReactJson, { src: (stateIndex === -1\r\n                    ? actions[actions.length - 1]\r\n                    : actions[stateIndex]).state, theme: \"harmonic\", iconStyle: \"square\", enableClipboard: false, collapsed: isCollapse, displayObjectSize: false, displayDataTypes: false, indentWidth: 2, style: {\r\n                    fontSize: 12,\r\n                    overflow: 'auto',\r\n                    height: 'calc(100vh - 90px)',\r\n                } }))));\r\n};\n\nconst cloneDeep$1 = require('lodash.clonedeep');\r\nconst { useState } = React;\r\nlet actions = [];\r\nlet previousStateIndex = -1;\r\nlet previousIsLoadPanelShow = false;\r\nconst config = typeof window !== 'undefined'\r\n    ? // @ts-ignore\r\n        JSON.parse(window.localStorage.getItem(STATE_MACHINE_DEV_TOOL_CONFIG) || '{}')\r\n    : {\r\n        isCollapse: false,\r\n        isClose: false,\r\n    };\r\nlet previousIsCollapse = config.isCollapse;\r\nlet previousIsClose = config.isClose;\r\nconst DevTool = () => {\r\n    const { state } = useStateMachine();\r\n    const [isClose, setClose] = useState(config.isClose);\r\n    const [isLoadPanelShow, setLoadPanel] = useState(false);\r\n    const [isCollapse, setExpand] = useState(config.isCollapse);\r\n    const [stateIndex, setStateIndex] = useState(-1);\r\n    const closePanel = () => {\r\n        const closeValue = !isClose;\r\n        setClose(closeValue);\r\n        saveSetting({ isClose: closeValue });\r\n    };\r\n    if (previousStateIndex === stateIndex &&\r\n        previousIsClose === isClose &&\r\n        previousIsLoadPanelShow === isLoadPanelShow &&\r\n        previousIsCollapse === isCollapse) {\r\n        actions.push({\r\n            name: (middleWare() || {}).debugName,\r\n            state: cloneDeep$1(state),\r\n        });\r\n    }\r\n    previousStateIndex = stateIndex;\r\n    previousIsClose = isClose;\r\n    previousIsLoadPanelShow = isLoadPanelShow;\r\n    previousIsCollapse = isCollapse;\r\n    return (createElement(\"div\", { style: {\r\n            fontFamily: `BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif`,\r\n        } },\r\n        createElement(Animate, { play: !isClose, end: { transform: 'translateY(-50px)' }, delay: 0.5, render: ({ style }) => (createElement(\"button\", { style: Object.assign({ position: 'fixed', right: 0, top: -1, width: 200, margin: 0, padding: 10, background: COLORS.primary, color: 'white', zIndex: Z_INDEX.top, fontSize: 13, lineHeight: '20px', border: 0, borderRadius: 0 }, style), onClick: () => closePanel() }, \"\\u2646 LITTLE STATE MACHINE\")) }),\r\n        createElement(Animate, { play: isClose, end: { transform: 'translateX(800px)' }, easeType: \"ease-out\", duration: 0.5, render: ({ style }) => (createElement(\"div\", { style: Object.assign({ zIndex: Z_INDEX.top, position: 'fixed', right: 0, top: 0, width: 600, height: '100vh', background: COLORS.primary, display: 'grid', gridTemplateColumns: '150px auto', boxShadow: '0 0 8px 3px #080808' }, style) },\r\n                createElement(DevToolActionPanel, { stateIndex: stateIndex, actions: actions, setStateIndex: setStateIndex }),\r\n                createElement(DevToolStateTree, Object.assign({}, {\r\n                    closePanel,\r\n                    actions,\r\n                    isLoadPanelShow,\r\n                    setLoadPanel,\r\n                    state,\r\n                    setExpand,\r\n                    isCollapse,\r\n                    setClose,\r\n                    isClose,\r\n                    stateIndex,\r\n                })))) })));\r\n};\n\nexport { DevTool, StateMachineContext, StateMachineProvider, createStore, setStorageName, setStorageType, useStateMachine };\n"]},"metadata":{},"sourceType":"module"}